{% extends "base.html" %}

{% block title %}Dashboard - PI-SA√öDE{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Banner de Boas-vindas -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="alert alert-primary">
                <h1 class="alert-heading">
                    <i class="bi bi-heart-pulse me-2"></i>Bem-vindo ao PI-SA√öDE
                </h1>
                <p class="mb-0">Platoforma Integrado de Gest√£o de Sa√∫de | <strong>{{ username }}</strong> - {{ location_name }}</p>
            </div>
        </div>
    </div>

    <!-- Quick Access -->
    <div class="row mb-4" >
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0"><i class="bi bi-lightning me-2"></i>Acesso R√°pido</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        {% if 'userMenu' in user_menus %}
                        <div class="col-md-2 col-4 mb-3">
                            <a href="/content/user" class="btn btn-outline-primary w-100 h-100 py-3">
                                <i class="bi bi-people display-6 d-block mb-2"></i>
                                Utilizadores
                            </a>
                        </div>
                        {% endif %}
                        
                        {% if 'registoMenu' in user_menus %}
                        <div class="col-md-2 col-4 mb-3">
                            <a href="/content/location" class="btn btn-outline-success w-100 h-100 py-3">
                                <i class="bi bi-building display-6 d-block mb-2"></i>
                                Unidades
                            </a>
                        </div>
                        {% endif %}
                        
                        {% if 'alosaudeMenu' in user_menus %}
                        <div class="col-md-2 col-4 mb-3">
                            <a href="/content/pisaudedashboard" class="btn btn-outline-info w-100 h-100 py-3">
                                <i class="bi bi-heart-pulse display-6 d-block mb-2"></i>
                                Alo-Sa√∫de
                            </a>
                        </div>
                        {% endif %}
                        
                        {% if 'trackingMenu' in user_menus %}
                        <div class="col-md-2 col-4 mb-3">
                            <a href="/content/dashboarddistribuicao" class="btn btn-outline-warning w-100 h-100 py-3">
                                <i class="bi bi-box-seam display-6 d-block mb-2"></i>
                                Distribui√ß√£o de Itens RISE
                            </a>
                        </div>
                        {% endif %}
                        
                        {% if 'trackingMenu' in user_menus %}
                        <div class="col-md-2 col-4 mb-3">
                            <a href="/content/dashboarddoddistribuicao" class="btn btn-outline-warning w-100 h-100 py-3">
                                <i class="bi bi-box-seam display-6 d-block mb-2"></i>
                                DOD - Resource And Resource Mapping
                            </a>
                        </div>
                        {% endif %}

                        {% if 'gestaoFormacaoMenu' in user_menus %}
                        <div class="col-md-2 col-4 mb-3">
                            <a href="/content/formacao" class="btn btn-outline-danger w-100 h-100 py-3">
                                <i class="bi bi-mortarboard display-6 d-block mb-2"></i>
                                Forma√ß√£o e RH SSM
                            </a>
                        </div>
                        {% endif %}

                        <!-- No seu dashboard.html, adicione este card no Quick Access -->
                        <div class="col-md-2 col-4 mb-3">
                            <a href="/content/agendamento" class="btn btn-outline-purple w-100 h-100 py-3">
                                <i class="bi bi-calendar-plus display-6 d-block mb-2"></i>
                                Agendar Consulta
                            </a>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Blocos Expans√≠veis dos M√≥dulos -->
    <div class="row">
        <div class="col-12">
            <!-- Bloco 1: M√≥dulo de Testagem na Comunidade -->
            <div class="card mb-3" id="moduloTestagem">
                <div class="card-header bg-info text-white d-flex justify-content-between align-items-center"
                    style="cursor: pointer;"
                    data-bs-toggle="collapse"
                    data-bs-target="#moduloTestagemBody"
                    aria-expanded="true">
                    <h5 class="mb-0">
                        <i class="bi bi-clipboard-pulse me-2"></i>
                        1. PI-SA√öDE - M√≥dulo de Testagem na Comunidade
                    </h5>
                    <i class="bi bi-chevron-down"></i>
                </div>

                <!-- üî• repare no ID correto aqui -->
                <div class="collapse show" id="moduloTestagemBody">
                    <div class="card-body">                        <div class="row">
                            <div class="col-md-6">
                                <h6><i class="bi bi-check-circle text-success me-2"></i>Funcionalidades Principais:</h6>
                                <ul>
                                    <li>Registo de atividades de testagem comunit√°ria</li>
                                    <li>Gest√£o de equipas m√≥veis de testagem</li>
                                    <li>Mapeamento de pontos de testagem</li>
                                    <li>Registo de resultados de testes r√°pidos</li>
                                    <li>Encaminhamento para unidades de sa√∫de</li>
                                    <li>Relat√≥rios de cobertura geogr√°fica</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6><i class="bi bi-graph-up text-primary me-2"></i>Indicadores:</h6>
                                <ul>
                                    <li>N√∫mero de testes realizados por per√≠odo</li>
                                    <li>Taxa de positividade por regi√£o</li>
                                    <li>Cobertura de popula√ß√µes-chave</li>
                                    <li>Taxa de encaminhamento para cuidados</li>
                                </ul>
                            </div>
                        </div>
                        <div class="mt-3 p-3 bg-light rounded">
                            <small class="text-muted">
                                <i class="bi bi-info-circle me-1"></i>
                                Este m√≥dulo permite expandir o acesso √† testagem do HIV para comunidades remotas e popula√ß√µes vulner√°veis.
                            </small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- {# Bloco 2: Alo-Sa√∫de para SMS #} -->
            <div class="card mb-3" id="moduloAloSaude">
                <div class="card-header bg-success text-white d-flex justify-content-between align-items-center"
                    style="cursor: pointer;"
                    data-bs-toggle="collapse"
                    data-bs-target="#moduloAloSaudeBody">
                    <h5 class="mb-0">
                        <i class="bi bi-chat-dots me-2"></i>
                        2. Alo-Sa√∫de - Sistema de SMS para Pacientes
                    </h5>
                    <i class="bi bi-chevron-down"></i>
                </div>

                <div class="collapse" id="moduloAloSaudeBody">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6><i class="bi bi-phone text-success me-2"></i>Funcionalidades de Comunica√ß√£o:</h6>
                                <ul>
                                    <li>Lembretes de consultas por SMS</li>
                                    <li>Mensagens de ades√£o ao tratamento TARV</li>
                                    <li>Alertas para levantamento de medicamentos</li>
                                    <li>Campanhas de educa√ß√£o em sa√∫de</li>
                                    <li>Mensagens personalizadas por grupo</li>
                                    <li>Sistema de respostas autom√°ticas</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6><i class="bi bi-heart-pulse text-danger me-2"></i>Gest√£o de Pacientes:</h6>
                                <ul>
                                    <li>Controlo de faltosos √†s consultas</li>
                                    <li>Acompanhamento de abandonos do TARV</li>
                                    <li>Monitoria de carga viral</li>
                                    <li>Gest√£o de grupos de apoio</li>
                                    <li>Registo de observa√ß√µes cl√≠nicas</li>
                                </ul>
                            </div>
                        </div>
                        <div class="mt-3 p-3 bg-light rounded">
                            <small class="text-muted">
                                <i class="bi bi-info-circle me-1"></i>
                                Sistema de comunica√ß√£o que melhora a ades√£o ao tratamento e reduz as taxas de abandono.
                            </small>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Bloco 3: Sistema de Forma√ß√£o e RH -->
            <div class="card mb-3" id="moduloFormacaoRH">
                <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center" 
                    style="cursor: pointer;" 
                    data-bs-toggle="collapse" 
                    data-bs-target="#moduloFormacaoRHBody">
                    <h5 class="mb-0">
                        <i class="bi bi-mortarboard me-2"></i>
                        3. Sistema de Forma√ß√£o e RH para SSM
                    </h5>
                    <i class="bi bi-chevron-down"></i>
                </div>

                <div class="collapse" id="moduloFormacaoRHBody">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6><i class="bi bi-people text-warning me-2"></i>Gest√£o de Recursos Humanos:</h6>
                                <ul>
                                    <li>Cadastro completo de militares da SSM</li>
                                    <li>Gest√£o de patentes e carreiras</li>
                                    <li>Controlo de licen√ßas e f√©rias</li>
                                    <li>Registo de formas de presta√ß√£o de servi√ßo</li>
                                    <li>Situa√ß√£o funcional do pessoal</li>
                                    <li>Gest√£o de despachos</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6><i class="bi bi-book text-info me-2"></i>Gest√£o de Forma√ß√µes:</h6>
                                <ul>
                                    <li>Registo de candidatos a forma√ß√£o</li>
                                    <li>Gest√£o de especialidades de sa√∫de</li>
                                    <li>Acompanhamento de militares em forma√ß√£o</li>
                                    <li>Plano de carreiras formativas</li>
                                    <li>Relat√≥rios de capacita√ß√£o</li>
                                </ul>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-12">
                                <h6><i class="bi bi-geo-alt text-primary me-2"></i>Distribui√ß√£o de Recursos:</h6>
                                <ul>
                                    <li>Sistema de afeta√ß√£o/aloca√ß√£o de pessoal</li>
                                    <li>Gest√£o de transfer√™ncias entre unidades</li>
                                    <li>Mapeamento de recursos humanos</li>
                                    <li>Otimiza√ß√£o da distribui√ß√£o territorial</li>
                                </ul>
                            </div>
                        </div>
                        <div class="mt-3 p-3 bg-light rounded">
                            <small class="text-muted">
                                <i class="bi bi-info-circle me-1"></i>
                                Sistema integrado de gest√£o do capital humano dos Servi√ßos de Sa√∫de Militares.
                            </small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bloco 4: Rastreamento de Itens/Materiais -->
            <div class="card mb-3" id="moduloRastreamento">
                <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center" 
                    style="cursor: pointer;" 
                    data-bs-toggle="collapse" 
                    data-bs-target="#moduloRastreamentoBody">
                    <h5 class="mb-0">
                        <i class="bi bi-box-seam me-2"></i>
                        4. M√≥dulo de Rastreamento de Itens/Materiais
                    </h5>
                    <i class="bi bi-chevron-down"></i>
                </div>

                <div class="collapse" id="moduloRastreamentoBody">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6><i class="bi bi-truck text-primary me-2"></i>Gest√£o de Log√≠stica:</h6>
                                <ul>
                                    <li>Controlo de entrada e sa√≠da de itens</li>
                                    <li>Gest√£o de armaz√©ns e invent√°rios</li>
                                    <li>Registo de notas de envio</li>
                                    <li>Tipifica√ß√£o de itens e materiais</li>
                                    <li>Controlo de prazos de validade</li>
                                    <li>Gest√£o de portos de entrega</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6><i class="bi bi-graph-up-arrow text-success me-2"></i>Monitoria e Distribui√ß√£o:</h6>
                                <ul>
                                    <li>Dashboard de distribui√ß√£o em tempo real</li>
                                    <li>Rastreamento de itens por lote</li>
                                    <li>Relat√≥rios de consumo por unidade</li>
                                    <li>Alertas de stock m√≠nimo</li>
                                    <li>Controlo de distribui√ß√£o por regi√£o</li>
                                </ul>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-12">
                                <h6><i class="bi bi-shield-check text-warning me-2"></i>Controlo de Qualidade:</h6>
                                <ul>
                                    <li>Registo de condi√ß√µes de armazenamento</li>
                                    <li>Controlo de cadeia de frio</li>
                                    <li>Auditoria de stocks</li>
                                    <li>Gest√£o de devolu√ß√µes</li>
                                </ul>
                            </div>
                        </div>

                        <div class="mt-3 p-3 bg-light rounded">
                            <small class="text-muted">
                                <i class="bi bi-info-circle me-1"></i>
                                Sistema completo de rastreabilidade que garante a disponibilidade de materiais de sa√∫de onde e quando s√£o necess√°rios.
                            </small>
                        </div>
                    </div>
                </div>
            </div>

                        <!-- Bloco 5: Sistema de Agendamento de Consultas -->
                        <div class="card mb-3" id="moduloAgendamento">
                            <div class="card-header bg-purple text-white d-flex justify-content-between align-items-center" 
                                style="cursor: pointer;" 
                                data-bs-toggle="collapse" 
                                data-bs-target="#moduloAgendamentoBody">
                                <h5 class="mb-0">
                                    <i class="bi bi-calendar-check me-2"></i>
                                    5. Sistema de Agendamento de Consultas
                                </h5>
                                <i class="bi bi-chevron-down"></i>
                            </div>

                            <div class="collapse" id="moduloAgendamentoBody">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h6><i class="bi bi-calendar-week text-purple me-2"></i>Funcionalidades:</h6>
                                            <ul>
                                                <li>Agendamento online de consultas</li>
                                                <li>Gest√£o de hor√°rios m√©dicos</li>
                                                <li>Verifica√ß√£o de disponibilidade em tempo real</li>
                                                <li>Lembretes autom√°ticos por SMS</li>
                                                <li>Confirma√ß√£o/cancelamento via SMS</li>
                                                <li>Painel administrativo completo</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <h6><i class="bi bi-phone text-success me-2"></i>Integra√ß√£o Mobile:</h6>
                                            <ul>
                                                <li>Servidor SMS via Android</li>
                                                <li>Respostas autom√°ticas dos pacientes</li>
                                                <li>Confirma√ß√£o em tempo real</li>
                                                <li>Redu√ß√£o de faltas √†s consultas</li>
                                                <li>Comunica√ß√£o bidirecional</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-12">
                                            <h6><i class="bi bi-graph-up text-primary me-2"></i>Benef√≠cios:</h6>
                                            <ul>
                                                <li>Redu√ß√£o de faltas em at√© 40%</li>
                                                <li>Otimiza√ß√£o da agenda m√©dica</li>
                                                <li>Melhoria na experi√™ncia do paciente</li>
                                                <li>Comunica√ß√£o eficiente com pacientes</li>
                                                <li>Relat√≥rios de ocupa√ß√£o e produtividade</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="mt-3 p-3 bg-light rounded">
                                        <small class="text-muted">
                                            <i class="bi bi-info-circle me-1"></i>
                                            Sistema integrado de agendamento que reduz faltas e melhora a gest√£o de consultas atrav√©s de comunica√ß√£o SMS automatizada.
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
            </div>
        </div>
    </div>
</div>

<style>
    .card-header[data-bs-toggle="collapse"] {
        transition: all 0.3s ease;
    }
    
    .card-header[data-bs-toggle="collapse"]:hover {
        opacity: 0.9;
        transform: translateY(-1px);
    }
    
    .card-header[data-bs-toggle="collapse"] .bi-chevron-down {
        transition: transform 0.3s ease;
    }
    
    .card-header[data-bs-toggle="collapse"][aria-expanded="true"] .bi-chevron-down {
        transform: rotate(180deg);
    }
    
    .card {
        box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        border: 1px solid rgba(0, 0, 0, 0.125);
    }
    
    .card:hover {
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    }
    
    .btn {
        transition: all 0.3s ease;
    }
    
    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    }
    
    .quick-access-btn {
        min-height: 120px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

                            .bg-purple {
                                background-color: #6f42c1 !important;
                            }
                            
                            .btn-outline-purple {
                                color: #6f42c1;
                                border-color: #6f42c1;
                            }
                            
                            .btn-outline-purple:hover {
                                color: white;
                                background-color: #6f42c1;
                                border-color: #6f42c1;
                            }
</style>

<script>
    $(document).ready(function() {
        // Adicionar comportamento smooth aos collapses
        $('.card-header[data-bs-toggle="collapse"]').on('click', function() {
            const target = $(this).data('bs-target');
            $(target).collapse('toggle');
        });
        
        // Inicializar tooltips
        $('[data-bs-toggle="tooltip"]').tooltip();
    });
</script>
{% endblock %}